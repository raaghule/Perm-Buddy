<template>
    <lightning-card>
        <div slot="title" class="pb-header">
            <h1>Perm Buddy</h1>
            <p>Please see sample CSV for Import/Export:
                <a href={fieldSampleUrl} download>Field Sample</a> |
                <a href={objectSampleUrl} download>Object Sample</a>
            </p>
        </div>
        <div class="slds-p-around_medium">
            <p class="info">Use the options below to import or export object and field permissions. Only CSV files are supported.</p>

            <lightning-combobox
                label="Please select an option"
                value={mode}
                options={modeOptions}
                onchange={handleModeChange}>
            </lightning-combobox>

            <lightning-combobox
                label="What do you want to do?"
                value={targetType}
                options={targetTypeOptions}
                onchange={handleTargetTypeChange}>
            </lightning-combobox>

            <template if:true={showExport}>
                <c-searchable-multi-select label="Objects" options={objectOptions} onchange={handleObjectChange}></c-searchable-multi-select>
                <c-searchable-multi-select label="Profiles" options={profileOptions} onchange={handleProfileChange}></c-searchable-multi-select>
                <c-searchable-multi-select label="Permission Sets" options={permSetOptions} onchange={handlePermSetChange}></c-searchable-multi-select>
                <template if:true={showFieldSelect}>
                    <c-searchable-multi-select label="Fields" options={fieldOptions} onchange={handleFieldChange}></c-searchable-multi-select>
                </template>
                <lightning-button label="Export CSV" onclick={handleExport} class="slds-m-top_medium export-btn"></lightning-button>
            </template>

            <template if:true={showImport}>
                <lightning-input type="file" label="Import CSV" accept=".csv" onchange={handleFileChange} class="import-file"></lightning-input>
                <lightning-button label="Import" onclick={handleImport} class="slds-m-top_medium import-btn"></lightning-button>
            </template>
              <div class="support">
                  <a href="mailto:raviswanath@outlook.com">Developer Support</a>
              </div>
          </div>
      </lightning-card>
  </template>
